### 项目名称：天机学堂 (在线教育微服务平台)
**核心技术**：Spring Cloud Alibaba, Redis, RocketMQ, XXL-JOB, Elasticsearch, Canal, Caffeine

#### 核心职责与技术亮点

**1. 高并发互动社区系统（点赞/评论/热点发现）**

> *对应笔记：`note/点赞功能/` 和 `note/热点发现和热点缓存/`*
> *   **架构演进**：针对单日千万级互动的读写压力，设计了 **Redis (热) + MQ (削峰) + MySQL (冷)** 的分层架构。放弃了简单的同步落库方案，采用 **Write-Behind (写后)** 策略，通过 MQ 异步批量合并写库，将数据库写入压力降低 **90%**。
> *   **多级缓存与热点治理**：
>   *   设计了 **"Caffeine 本地缓存 + Redis 分布式缓存"** 的多级缓存体系。
>   *   自主研发**热点探测机制**（基于滑动窗口统计），针对突发热点（如爆款课程评论）自动进行**流量降级**，将热点 Key 推送至应用层本地内存，成功解决 Redis 单分片热点倾斜（Hot Key）导致的网卡瓶颈问题，单机 QPS 提升至万级。
> *   **冷热数据分离**：
>   *   针对 Feed 流“重读轻写”特性，设计了基于时间的冷热分离策略。热数据（近3个月）存入 Redis ZSet 保证毫秒级响应，冷数据通过 **Bloom Filter (布隆过滤器)** 拦截无效查询，防止穿透到数据库，有效平衡了内存成本与用户体验。

**2. 促销与抢购系统（优惠券/秒杀）**
> *对应笔记：`note/优惠卷超领超卖优化方案.md`*
>
> *   **并发安全保障**：
>   *   解决了传统数据库事务下的“超卖”与“超领”问题。抛弃数据库行锁方案，引入 **Redis + Lua 脚本** 实现**原子性的 "Check-Then-Act"** 操作，在内存中完成库存扣减与资格校验，性能提升 10 倍以上。
>   *   配合 **Redisson 分布式锁** 处理细粒度的用户级并发冲突，确保“一人一单”的严格语义。
> *   **异步解耦设计**：
>   *   将核心抢购流程拆分为“同步校验”与“异步落库”两阶段。前端请求只与 Redis 交互即返回结果，后端通过 MQ 削峰填谷，平滑处理数据库的 IO 脉冲。
> *   **海量兑换码优化**：
>   *   针对亿级兑换码的存储与查验，优化了存储结构。利用 **Redis BitMap** 替代传统 Set 存储兑换状态，内存占用降低 **98%**；利用 **Bit-Shifting (位运算)** 将业务 ID 嵌入兑换码序列，实现了无索引的 O(1) 校验。

**3. 分布式任务调度与排行榜系统**

> *对应笔记：`note/面试_排行榜架构设计与难点总结.md`*
> *   **海量数据处理**：
>   *   利用 **Redis ZSet** 实现实时积分排行榜，结合 MyBatis Plus 动态表名插件实现按月分表归档。
>   *   针对月末“赛季结算”的海量数据同步场景（Redis 到 MySQL），采用 **XXL-JOB 分片广播 (Sharding Broadcast)** 模式。将百万级数据切分为 N 个分片，由集群内多实例并行处理，同步效率提升 N 倍。
> *   **BigKey 治理**：
>   *   在赛季切换清空旧榜单时，摒弃传统的 `DEL` 命令，采用 **`UNLINK`** 进行异步非阻塞删除，避免了因删除百万级成员的 BigKey 导致 Redis 主线程阻塞引发的系统抖动。

**4. 搜索服务与数据一致性优化**
> *对应笔记：`note/天机学堂改进点.md`*
> *   **CDC 实时同步**：
>   *   改造原有基于 MQ 的全量覆盖同步方案，引入 **CDC (Change Data Capture)** 技术（监听 MySQL Binlog）。
>   *   实现了基于字段级变更的**局部更新 (Partial Update)** 策略，仅将变更字段同步至 Elasticsearch，解决了并发修改下的字段覆盖问题（Lost Update），同时大幅减少了 ES 的索引重建开销和网络带宽占用。

---

### 面试官可能会追问的点（预演）

为了让这段简历真正生效，你需要准备好以下问题的“剧本”：

1.  **关于热点发现**：
    *   *问*：你是怎么判断一个 Key 是热点的？阈值怎么定？
    *   *答*：不要说 Flink（太重），说参考了 JD-HotKey 的思路，在客户端做预统计（滑动窗口），超过阈值（如 5QPS）上报给计算节点，计算节点聚合后再推送到所有机器的 Caffeine。
2.  **关于布隆过滤器**：
    *   *问*：布隆过滤器误判了怎么办？删数据了怎么办？
    *   *答*：误判会导致回源查库，是可接受的代价；删除困难是硬伤，所以我们只用它拦截“绝对不存在”的数据。或者提到使用布隆过滤器的变种（如布谷鸟过滤器）支持删除，但项目中为了稳定性选了标准版。
3.  **关于 Lua 脚本**：
    *   *问*：Lua 脚本执行时间长了会阻塞 Redis 吗？
    *   *答*：会。所以我的脚本逻辑非常简单，只做纯内存计算，不涉及任何 IO。而且我们有超时限制。
4.  **关于 XXL-JOB 分片**：
    *   *问*：如果一个分片处理失败了怎么办？
    *   *答*：XXL-JOB 本身有重试机制。我们在业务逻辑里保证了**幂等性**（如 `INSERT IGNORE` 或 `ON DUPLICATE KEY UPDATE`），所以重试不会导致数据重复。

这一版简历把重点放在了**架构设计、性能优化和极端场景处理**上，完全区别于普通的 CRUD 项目，非常适合用来冲击大厂。